<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset=utf-8>
        <title>Practical task #15 (events)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            a{
                display: block;
                font-size: 25px;
            }
            .colorRed{
                color: red;
            }
            .valueConsole{
                margin: 50px 10px 50px 0;
                transition: .2s linear;
            }
            .valueConsole:hover{
                background-color: rgb(223, 239, 253);
            }
            .paragraph{
                font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
                font-size: 20px;
                margin: 0 0 50px 0;
                cursor: pointer;
            }
            .redBorder{
                border-color: red;
            }
            .greenBorder{
                border-color: green;
            }
        </style>
    </head>
    <body></body>  
        <script>
            function actionsLinks() {
                const links = document.createElement('div');

                const link1 = document.createElement('a');
                link1.textContent = 'ссылка1';
                link1.setAttribute('title', 'link1');
                link1.setAttribute('href', 'https://learn.javascript.ru/array-methods');

                const link2 = document.createElement('a');
                link2.textContent = 'ссылка2';
                link2.setAttribute('title', 'link2');
                link2.setAttribute('href', 'https://learn.javascript.ru/array-methods');

                const link3 = document.createElement('a');
                link3.textContent = 'ссылка3';
                link3.setAttribute('title', 'link3');
                link3.setAttribute('href', 'https://learn.javascript.ru/array-methods');

                const link4 = document.createElement('a');
                link4.textContent = 'ссылка4';
                link4.setAttribute('title', 'link4');
                link4.setAttribute('href', 'https://learn.javascript.ru/array-methods');

                const link5 = document.createElement('a');
                link5.textContent = 'ссылка5';
                link5.setAttribute('title', 'link5');
                link5.setAttribute('href', 'https://learn.javascript.ru/array-methods');

                document.body.prepend(links);
                links.append(link1, link2, link3, link4, link5);

                document.querySelector('div').addEventListener('mouseover', testLink);
                
                function testLink() {    
                    let target = event.target;
                    
                        if (target.tagName === 'A') {
                            let linkTitle = target.getAttribute('title');
                            let linkHref = target.getAttribute('href');
                            target.classList.add('colorRed');
                            
                            target.textContent = linkTitle + ' ' + '(' + linkHref + ')';
                            
                        }
                        function removeListener() {
                            document.querySelector('div').removeEventListener('mouseover', testLink);
                            target.textContent = 'Функция удалена!'
                        }
                        setTimeout(removeListener, 5000);
                } 
            }
            actionsLinks();



            function inputValue() {
                const forma = document.createElement('form');
                forma.setAttribute('id', 'valueInConsole');

                const input1 = document.createElement('input');
                input1.setAttribute('value', 'inputOne');
                input1.setAttribute('class', 'valueConsole');

                const input2 = document.createElement('input');
                input2.setAttribute('value', 'inputTwo');
                input2.setAttribute('class', 'valueConsole');

                const input3 = document.createElement('input');
                input3.setAttribute('value', 'inputThird');
                input3.setAttribute('class', 'valueConsole');

                document.body.append(forma);
                forma.append(input1, input2, input3);

                const inputs = document.querySelectorAll('.valueConsole');

                for (let i = 0; i < inputs.length; i++) {
                    inputs[i].addEventListener('blur', outputConsole, {once: true});
                    function outputConsole() {
                        console.log(inputs[i].value);
                    }
                }
            
            }
            inputValue();



            function getSquareOfNumber() {
                let thirdParagraphs = document.createElement('article');
                document.body.append(thirdParagraphs);
                let parag;
                
                for (let i = 0; i < 3; i++) {
                    let rand = Math.floor(1 + Math.random() * (100));

                    parag = document.createElement('p');
                    parag.innerHTML = 'Donec at sem mattis, ' + rand + ' feugiat tellus id,' +
                    'hendrerit orci. Morbi at odio in ligula viverra finibus at quis sapien. Sed odio tortor,' + 
                    'iaculis a quam ut, varius malesuada nulla. Pellentesque habitant morbi tristique senectus' +
                    'et netus et malesuada fames ac turpis egestas. Nullam ullamcorper erat ac nulla laoreet' +
                    'finibus non a est. Ut et nulla ante. Integer elementum commodo aliquam. Vestibulum' +
                    'lacinia ultricies enim id pulvinar.';

                    thirdParagraphs.append(parag);
                    parag.classList.add('paragraph');
                }

                const collectionP = document.querySelectorAll('p');

                collectionP.forEach(function(item) {
                    item.addEventListener('click', function() {
                    let searhNumbers = item.textContent.replace(/[^0-9]/g, '');
                    
                    const findNumber = Math.pow(searhNumbers, 2);
                    item.textContent = findNumber;
                    }, {once: true})
                });
            }
            getSquareOfNumber();


            function checkCorrectValue() {
                const forma = document.createElement('form');
                document.body.append(forma);
                forma.setAttribute('id', 'formCheck');

                for (let i = 0; i < 3; i++) {
                    const inputWithCheck = document.createElement('input');
                    inputWithCheck.setAttribute('class', 'redBorder valueConsole');
                    inputWithCheck.setAttribute('data-length', '5');
                    forma.append(inputWithCheck);
                }

                document.querySelector('#formCheck').addEventListener('focusout', blurInput);
                function blurInput() {

                    if (event.target.tagName === 'INPUT') {
                        const targ = event.target;
                        const quantityNow = targ.value.length;
                        const quantityMustBe = targ.getAttribute('data-length');
                        Number(quantityMustBe) === Number(quantityNow) ? targ.classList.add('greenBorder') : targ.classList.remove('greenBorder');
                    }
                }
            }
            checkCorrectValue();
        </script>
    </body> 
</html>