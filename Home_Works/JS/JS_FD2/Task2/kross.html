<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Example from slides</title>

  <style>
    body {
        margin: 0;
        background-color:#556;
        /* background-image: linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a), 
        linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a); */
        background-size:80px 140px;
        background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px;
        font-family: "Exo 2", sans-serif;
        box-sizing: border-box;
        }

        *, *:before, *:after {
        box-sizing: inherit;
        }

        .container {
        margin: 20px;
        padding: 20px;
        min-height: 600px;
        font-size: 16px;
        background-color: #fff;
        }

        .container .btn {
        text-align: center;
        margin-top: 50px;
        }

        .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 50;
        background: rgba(0, 0, 0, 0.6);
        }

        .modal-open {
        color: #fff;
        border: 1px #007bff solid;
        border-radius: 5px;
        padding: 8px 12px;
        font-size: 16px;
        font-family: 'Exo 2', sans-serif;
        background-color: #007bff;
        text-decoration: none;
        }

        .modal-open:hover {
        text-decoration: none;
        background-color: #0069d9;
        border-color: #0062cc;
        }

        .modal-open:active {
        text-decoration: none;
        background-color: #0062cc;
        border-color: #005cbf;
        }

        .modal {
        display: block;
        width: 600px;
        max-width: 100%;
        height: 400px;
        max-height: 100%;
        position: fixed;
        z-index: 100;
        left: 50%;
        top: 50%;
        border-radius: 10px;
        transform: translate(-50%, -50%);
        background: white;
        box-shadow: 0 0 60px 10px rgba(0, 0, 0, 0.9);
        }

        .modal_closed {
        display: none;
        }

        .modal__header {
        border-bottom: 1px gray solid;
        padding: 10px 15px;
        margin-bottom: 15px;
        }
        .modal__close {
        position: absolute;
        top: 15px;
        right: 15px;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAEFCu8CAAAABGdBTUEAALGPC/xhBQAAAqpJREFUSA2tljtyFEEMhsdgHJpb2NyAxwkgcQHGHGE3Bs4B8RICV6G4ARSERH4QGaog4vF/qv7HWu3MzrqMqjR69C9puls9PV13QU9Rr13Y3Vfpf7GPxLdRROGw0hs43vHYFuM9wYAMOcbYaQ47u7fJgRMGFMkwIgyHyIDesNMgAD3dkvZDvGWPlSVUG4wxBu43h0HIGT4UO7Hv2EeoB1wCQPhYzi/i12JHSA26acWpLV96IMtDGQZU+TEDrT9qAb8lD8RnzXbwC9mL5vsjGbSvpwGnzWfB+5s8F7C/cLLSDrS8y0Ci+gbguutiBzxLYCoQkMm4D0NOD47JwVUl0Vz8U5wD38veFa8ldptDw9xpfhZvkj4JkStlnT1eoXxmMrjqHKUlYlMBsclsdg5gZWkKmgP/Q3EQi2Fgc/WNe2yH5IOKowscWDslxXV0lXF7DNiwzMEOpLLHkTHX7ECv3XKvBIH5Ll7KlOfEmIm3yAWeMEDf2Ylt+iYlv/Zz2cbR39FKdmBDeU4O5jMB7jMA0yspDp6SjunlJsE3enRROAGchFyVkzIruEmTT91cTLJ61GpyMGApfinioGwy3VxwSCcHudbS/yhUi5NzhXbl4QbJ4EVB0T65nYzF59ZyiFvMGFqNGkE0a25yg/KHuUFDkJxjB9dCAdAjHwbno0YcDP4s7KySt/dfh9RJ4gWGVsF54wgP3VMGWDKbenfl6nxYwBg/JuNjw8UwBsA/tEdyr9DU7MgVn8V9Kflj7OL8kY0tJ8nH9g9//mg7HzX2xEFzPT1g6V+pBglRZzE2+3y9ON8sJ0LnD8eXHCAus4X4QMyFt26PGAMDliPhi5A85OwvROlLtCOLdfZbXVWSi5wb0WOh+Nm7bFFiiL0S8btDc/HL80Z83hgdH2NgJukfa8ehuEonW4wAAAAASUVORK5CYII=');
        overflow: hidden;
        text-indent: -999em;
        text-decoration: none;
        }

        .modal__close:hover {
        background-color: #dc3545;
        text-decoration: none;
        }

        .modal__content {
        padding: 10px 15px;
        min-height: 200px;
        }

        .form-field {
        padding: 0 0 10px;
        }

        .form-field label {}

        .form-field input {
        border: 1px gray solid;
        border-radius: 5px;
        padding: 8px 12px;
        margin: 0 10px;
        font-size: 14px;
        font-family: "Exo 2", sans-serif;
        }

        .form-field .input__default {
        width: 380px;
        }

        .form-field .input__date-birth {
        width: 100px;
        text-align: center;
        }

        .modal__footer {
        border-top: 1px gray solid;
        padding: 15px;
        margin-top: 15px;
        text-align: right;
        }

        .modal__footer button {
        border: 1px gray solid;
        border-radius: 5px;
        padding: 8px 12px;
        margin: 0 10px;
        font-size: 14px;
        font-family: "Exo 2", sans-serif;
        }

        .modal__footer .modal__cancel {
        background-color: #dc3545;
        border-color: #dc3545;
        color: #fff;
        }

        .modal__footer .modal__cancel:hover {
        background-color: #c82333;
        border-color: #bd2130;
        }

        .modal__footer .modal__cancel:active {
        background-color: #bd2130;
        border-color: #b21f2d;
        }

        .modal__footer .modal__save {
        background-color: #28a745;
        border-color: #28a745;
        color: #fff;
        }

        .modal__footer .modal__save:hover {
        background-color: #218838;
        border-color: #1e7e34;
        }

        .modal__footer .modal__save:active {
        background-color: #1e7e34;
        border-color: #1c7430;
        }

        .modal__footer .modal__save:disabled {
        opacity: 0.7;
        background-color: #28a745;
        border-color: #28a745;
        color: #fff;
        cursor: not-allowed;
        }
  </style>
</head>
<body>

    <div class="container">
        <h1>Создание уже и не такого простого модального окошка!</h1>
      
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
        <p class="btn"><a href="#" data-supermodal="my-custom-modal" class="modal-open" title="Покажите мне модальное окошко">Открыть окно</a></p>
      
        <div class="modal-data"></div>
        <p class="btn"><a href="#" id="clear-data" class="clear-data" style="display: none;">Очистить данные</a></p>
      </div>
      
      <div class="modal-overlay modal_closed" id="modal-overlay"></div>
      <div class="modal modal_closed" id="my-custom-modal">
        <!-- modal_closed -->
      
        <header class="modal__header">
          <a href="#" class="modal__close" id="modal-close" title="Закрыть модальное окно">Закрыть</a>
          <h2>Введите данные</h2>
        </header>
      
        <main class="modal__content">
          <div class="form-field">
            <label for="name">Ваше имя:</label>
            <input required class="input__default" type="text" id="name" name="name">
          </div>
          <div class="form-field">
            <label>Ваш день рождения:</label>
            <input required type="number" class="input__date-birth" id="birth-day" name="name" placeholder="День"> -
            <input required type="number" class="input__date-birth" id="birth-month" name="name" placeholder="Месяц"> -
            <input required type="number" class="input__date-birth" id="birth-year" name="name" placeholder="Год">
          </div>
        </main>
      
        <footer class="modal__footer">
          <button id="modal-cancel" class="modal__cancel" title="Отмена">Отмена</button>
          <button id="modal-save" class="modal__save" title="Сохранить">Сохранить данные</button>
        </footer>
      </div>

<script>
  
  /* ----- begin controller ---- */
  function ModalController () {
    
    let myModalModel = null;
    let myModalContainer = null;

    this.init = function(model, container) { // получаем кнопки и вешаем обработчики
      myModalModel = model;
      myModalContainer = container;

      const btnOpenModal = document.querySelector('.modal-open');
      btnOpenModal.addEventListener('click', (e) => {
        this.openModal();
      })

      const btnCloseModal = myModalContainer.querySelector('#modal-close');
      const btnCancelModal = myModalContainer.querySelector('#modal-cancel');
      const btnSaveModal = myModalContainer.querySelector('#modal-save');      
    
      const inputName = myModalContainer.querySelector('#name');
      const inputDay = myModalContainer.querySelector('#birth-day');
      const inputMonth = myModalContainer.querySelector('#birth-month');
      const inputYear = myModalContainer.querySelector('#birth-year');

      inputName.addEventListener('input', () => appModalModel.checkInputValue(btnSaveModal));
      inputDay.addEventListener('input', () => appModalModel.checkInputValue(btnSaveModal));
      inputMonth.addEventListener('input', () => appModalModel.checkInputValue(btnSaveModal));
      inputYear.addEventListener('input', () => appModalModel.checkInputValue(btnSaveModal));

      myModalContainer.addEventListener('click', (event) => {
        event.preventDefault();
        const eTarget = event.target.id;
        switch (eTarget) {
          case 'modal-close': this.hideModal(); break;
          case 'modal-cancel': this.hideModal(); break;
          case 'modal-save': this.saveModal(); break;
        }
      })
    }

    this.openModal = function () {
      myModalContainer.classList.remove('modal_closed');
      modalOverlay.classList.remove('modal_closed');
    }

    this.hideModal = function () {
      myModalContainer.classList.add('modal_closed');
      modalOverlay.classList.add('modal_closed');
      this.clearData();
    }

    this.saveModal = function (event) {
      myModalContainer.classList.add('modal_closed');
      modalOverlay.classList.add('modal_closed');
      this.clearData();
      appModalModel.saveModalData();
    }

    this.clearData = function () {
      appModalModel.clearForm();
    }
  };
/* ------ end controller ----- */

/* ------- begin model ------- */
  function ModalModel () {
    let myModalContainer = null;
    let myModalView = null;
    let userData = {};
    let inputName = document.querySelector('#name');
    let inputDay = document.querySelector('#birth-day');
    let inputMonth = document.querySelector('#birth-month');
    let inputYear = document.querySelector('#birth-year');

    this.init = function(container) {
      myModalContainer = container;
      myModalView = appModalView;
      
      
    }

    this.checkInputValue = function(btn) {
      if(!inputName.value || !inputDay.value || !inputMonth.value || !inputYear.value){
        btn.setAttribute('disabled', 'disabled');
      } else {
        btn.removeAttribute('disabled');
      }
    }

    this.openModal = function() {
    }

    this.closeModal = function() {
    }

    this.saveModalData = function(inputName, inputDay, inputMonth, inputYear) { //получить данные из модалки и сохранить
      userData.name = inputName.value;
      userData.day = inputDay.value;
      userData.month = inputMonth.value;
      userData.year = inputYear.value;
      this.storeData();
    }

    this.storeData = function() { // сохранить данные в localStorage, а если не доступно, то в cookies
      localStorage.setItem('userData', JSON.stringify(userData));
    }

    this.getData = function() { //достать данные из хранилища
    }

    this.updateData = function() {
    }

    this.clearData = function() { //очистить данные в хранилище
    }

    this.clearForm = function() { //очистить данные в форме
      inputName.value = '';
      inputDay.value = '';
      inputMonth.value = '';
      inputYear.value = '';
    }

  }
/* -------- end model -------- */

/* ------- begin view -------- */
function ModalView() {
    let myModal = null;
    let myModalOverlay = null;
    let btnSaveModal = null; 

    this.init = function(container) {
      myModal = container;
      btnSaveModal = myModal.querySelector('#modal-save');  
      btnSaveModal.setAttribute('disabled', 'disabled');
    }

    this.show = function () {
    }

    this.hide = function () {
    }

    this.printViewData = function () { // вывести данные из хранилища в div.modal-data
    }

    this.clearViewData = function () { // очистить или выдать дефолтное сообщение только для div.modal-data
    }

  };
/* -------- end view --------- */

 const container = document.querySelector('#my-custom-modal');
 const modalOverlay = document.querySelector('#modal-overlay');

// глобальная инициализация

  const appModalController = new ModalController();
  const appModalModel = new ModalModel();
  const appModalView = new ModalView();

//вызвать init-методы...
  appModalController.init(appModalModel, container);
  appModalModel.init(appModalView);
  appModalView.init(container);

</script>
</body>
</html>
